## Cash Flow Diagram

```{r}
library(tidyverse)
df <- data.frame(time=c(1, 2, 3), positiv=c(5, 0, 4), negativ=c(-2, -3, 0))

ggplot(df, aes(time, xend = time)) + 
  geom_segment(aes(y = 0, yend = positiv, colour = "positiv"),
    position = "stack", arrow = arrow()) + 
  geom_segment(aes(y = 0, yend = negativ, colour = "negativ"), 
    position = "stack", arrow = arrow()) + 
  scale_colour_manual("Cash Flussrichtung", 
    values = c("negativ" = "red", "positiv" = "blue"))


ggplot(df, aes(time, xend = time)) +    
  geom_rect(aes(xmin=time, xmax=time+1, ymin = 0, ymax = positiv, fill = "positiv")) +    
  geom_rect(aes(xmin=time, xmax=time+1, ymin = 0, ymax = negativ, fill = "negativ")) +    
  scale_fill_manual("Direction",      values = c("negativ" = "red", "positiv" = "black"))
```




Use `\alert` to \alert{highlight} some text

## Squared Paper

-   `\squared{}` (or `\kariert{}`) can be used to produce squared paper

\squared{16}

## Squared Paper

-   `\lined{}` (or `\liniert{}`) can be used to produce lined paper

\lined{14}

## Slide with R output

```{r cars, echo = TRUE}
summary(cars)
```

## Slide with mathematics

Quantile score for observation $y$. For $0<p<1$:

\begin{block}{}
  \[
    S(y_t,q_t(p)) = \left\{
      \begin{array}{rl}
            p(y_t-q_t(p)) & \text{if $y_t \ge q_t(p)$}\\
        (1-p)(q_t(p)-y_t) & \text{if $y_t < q_t(p)$}
      \end{array}\right.
  \]
\end{block}

Average score over all percentiles gives the best distribution forecast: $$
  QS = \frac{1}{99T}\sum_{p=1}^{99}\sum_{t=1}^T S(q_t(p),y_t)
$$

## R Table

A simple `knitr::kable` example:

\small

```{r kableEx, echo=TRUE}
knitr::kable(mtcars[1:4, 1:7],
       caption="(Parts of) the mtcars dataset")
```

## Resources

### For more information:

-   See the [RMarkdown repository](https://github.com/rstudio/rmarkdown) for more on RMarkdown
-   See the [binb repository](https://github.com/eddelbuettel/binb) for more on binb
-   See the [binb vignettes](https://github.com/eddelbuettel/binb/vignettes) for more examples.









## Markov-Ketten-Beispiel
```{julia}
#import Pkg; Pkg.add("StatsBase")
using LinearAlgebra, StatsBase

# Transition probability matrix
P = [0.5 0.4 0.1;
     0.3 0.2 0.5;
     0.5 0.3 0.2]

# First way (as a limit)
piProb1 = (P^100)[1,:]

# Second way (solution to linear system)
A = vcat( (P' - I)[1:2,:], ones(3)' )
b = [0 0 1]'  
piProb2 = A\b

# Third way (Perron Frobenius eigenvector)
eigVecs = eigvecs(copy(P'))
highestVec = eigVecs[:,findmax(abs.(eigvals(P)))[2]]
piProb3 = Array{Float64}(highestVec)/norm(highestVec, 1)

# Fourth way (Monte Carlo simulation)
numInState = zeros(Int,3)
state = 1
N = 10^6
for t in 1:N
  numInState[state] += 1
  global state = sample(1:3, weights(P[state,:]))
end
piProb4 = numInState/N

display([piProb1, piProb2, piProb3, piProb4])

```

